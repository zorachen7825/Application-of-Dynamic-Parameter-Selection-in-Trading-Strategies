# Gork 量化交易策略 - 固定停損

## 專案簡介

這是一個基於技術指標的量化交易策略研究專案，主要針對台股指數期貨進行回測分析。專案包含四種不同的交易策略，每種策略都結合了移動平均線和威廉指標，並使用固定停損機制來控制風險。

## 策略概述

### 策略 1：均線買 + 均線賣
- **進場條件**：短期均線上穿長期均線 AND 威廉指標超賣
- **出場條件**：均線死亡交叉 OR 威廉指標超買 OR 停損

### 策略 2：均線買 + 價格賣
- **進場條件**：短期均線上穿長期均線 AND 威廉指標超賣
- **出場條件**：價格跌破長期均線 OR 威廉指標超買 OR 停損

### 策略 3：價格買 + 均線賣
- **進場條件**：價格突破短期均線 AND 威廉指標超賣
- **出場條件**：短期均線下穿長期均線 OR 威廉指標超買 OR 停損

### 策略 4：價格買 + 價格賣
- **進場條件**：價格突破短期均線 AND 威廉指標超賣
- **出場條件**：價格跌破長期均線 OR 威廉指標超買 OR 停損

## 技術指標

### 移動平均線 (MA)
- 短期移動平均線：可調整參數 (15-35 期)
- 長期移動平均線：可調整參數 (20-60 期)

### 威廉指標 (Williams %R)
- 買進信號週期：可調整參數 (20-60 期)
- 賣出信號週期：可調整參數 (20-60 期)
- 買進閾值：可調整參數 (-80 到 -50)
- 賣出閾值：可調整參數 (-50 到 -20)

### 停損機制
- 固定停損比例：可調整參數 (0.2% - 0.4%)

## 檔案結構

```
論文/
├── README.md                    # 專案說明文件
├── requirements.txt              # Python 套件依賴
├── data/
│   └── full_15K.csv            # 歷史價格數據
├── src/
│   ├── __init__.py
│   ├── data_loader.py          # 數據載入模組
│   ├── indicators.py           # 技術指標計算
│   ├── strategies.py           # 交易策略實作
│   ├── backtest.py            # 回測引擎
│   ├── optimization.py         # 參數優化
│   └── evaluation.py          # 績效評估
├── notebooks/
│   ├── 01_data_exploration.ipynb
│   ├── 02_strategy_backtest.ipynb
│   ├── 03_parameter_optimization.ipynb
│   └── 04_results_analysis.ipynb
├── results/
│   ├── grid_search_results.json
│   ├── bayesian_optimization_results.json
│   └── performance_metrics.json
└── docs/
    ├── strategy_design.md
    ├── optimization_methods.md
    └── results_analysis.md
```

## 安裝與使用

### 環境需求
- Python 3.8+
- 相關套件見 `requirements.txt`

### 安裝步驟
```bash
# 克隆專案
git clone <repository-url>
cd gork-trading-strategy

# 安裝依賴
pip install -r requirements.txt

# 執行回測
python src/backtest.py

# 執行參數優化
python src/optimization.py
```

## 主要功能

### 1. 數據處理
- 載入歷史價格數據
- 數據清洗與預處理
- 技術指標計算

### 2. 策略回測
- 四種交易策略實作
- 滑動窗口回測
- 交易記錄與績效計算

### 3. 參數優化
- 網格搜索優化
- 貝葉斯優化
- 多目標優化

### 4. 績效評估
- 勝率計算
- 夏普比率
- 穩健夏普比率 (MSR)
- 交易時長分析
- 出場原因統計

## 優化結果

### 網格搜索結果
- 測試參數組合：30,000 種
- 篩選條件：
  - 交易次數 > 20
  - 勝率 > 0.3
  - 最終資金 > 100 萬
  - 5 筆最長持倉時間平均 > 3

### 最佳策略表現
- **策略 1**：最高穩健夏普比率 1.0253
- **策略 2**：最高穩健夏普比率 0.5607
- **策略 3**：最高穩健夏普比率 0.9321
- **策略 4**：最高穩健夏普比率 0.9660

## 研究發現

1. **策略 1 表現最佳**：均線買進 + 均線賣出的組合在測試期間表現最穩定
2. **停損機制重要性**：固定停損有效控制下行風險
3. **參數敏感性**：不同參數組合對策略表現影響顯著
4. **交易頻率**：適中的交易頻率有助於平衡收益與成本

## 注意事項

- 本專案僅供研究使用，不構成投資建議
- 歷史表現不代表未來收益
- 實際交易需考慮手續費、滑點等因素
- 建議在實盤交易前進行充分的風險評估

## 貢獻指南

歡迎提交 Issue 和 Pull Request 來改善這個專案。

## 授權

本專案採用 MIT 授權條款。

## 聯絡資訊

如有問題或建議，請透過 GitHub Issues 聯絡。 